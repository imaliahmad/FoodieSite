
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section id="slider">
    <!-- Carousel -->
    <div id="demo" class="carousel slide" data-bs-ride="carousel" style="height: 500px">

        <!-- Indicators/dots -->
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
        </div>

        <!-- The slideshow/carousel -->
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="~/AmpleBs5Theme/images/menu-1.jpg" alt="Los Angeles" class="img-fluid">
            </div>
            <div class="carousel-item">
                <img src="~/AmpleBs5Theme/images/menu-2.jpg" alt="Chicago" class="img-fluid">
            </div>
            <div class="carousel-item">
                <img src="~/AmpleBs5Theme/images/menu-3.jpg" alt="New York" class="img-fluid">
            </div>
        </div>

        <!-- Left and right controls/icons -->
        <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</section>


<section id="popular-items">
    <div class="container">
        <div class="row" id="popularItemsDiv">
            <div class="text-center mb-3">
                <h5 class="section-sub-heading">Our Dishes</h5>
                <h3 class="section-heading">POPULAR DISHES</h3>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card">
                    <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                    <div class="card-body  text-center">
                        <h5 class="card-title">Tasty Food</h5>
                        <p class="card-text">$ 150</p>
                        <a href="#" class="btn btn-primary card-btn btn-block">Add To Cart</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card">
                    <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                    <div class="card-body  text-center">
                        <h5 class="card-title">Tasty Food</h5>
                        <p class="card-text">$ 150</p>
                        <a href="#" class="btn btn-primary card-btn btn-block">Add To Cart</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card">
                    <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                    <div class="card-body  text-center">
                        <h5 class="card-title">Tasty Food</h5>
                        <p class="card-text">$ 150</p>
                        <a href="#" class="btn btn-primary card-btn btn-block">Add To Cart</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card">
                    <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                    <div class="card-body  text-center">
                        <h5 class="card-title">Tasty Food</h5>
                        <p class="card-text">$ 150</p>
                        <a href="#" class="btn btn-primary card-btn btn-block">Add To Cart</a>
                    </div>
                </div>
            </div>
            <div id="cardTemplateColumn" class="visually-hidden">
                <div class="col-md-3 mb-3">
                    <div class="card">
                        <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                        <div class="card-body  text-center">
                            <h5 class="card-title">Tasty Food</h5>
                            <p class="card-text">$ 150</p>
                            <a href="#" class="btn btn-primary card-btn btn-block">Add To Cart</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>
<section id="why-choose-us">
    <div class="container">
        <div class="row">
            <div class="text-center mb-3">
                <h5 class="section-sub-heading">About Us</h5>
                <h3 class="section-heading">WHY CHOOSE US?</h3>
            </div>
            <div class="col-md-6">
                <img src="~/AmpleBs5Theme/images/about-img.png" class="card-img-top" alt="Alternate Text" />
            </div>
            <div class="col-md-6">
                <h1>Best Food In The Country</h1>
                <p>
                    Lorem Ipsum Dolor Sit Amet Consectetur Adipisicing Elit. Dolore, Sequi Corrupti Corporis Quaerat Voluptatem Ipsam Neque Labore Modi Autem, Saepe Numquam Quod Reprehenderit Rem? Tempora Aut Soluta Odio Corporis Nihil!
                    <br />
                    Lorem Ipsum Dolor Sit Amet, Consectetur Adipisicing Elit. Aperiam, Nemo. Sit Porro Illo Eos Cumque Deleniti Iste Alias, Eum Natus.
                </p>
                <button type="button" class="btn btn-primary"><i class="fas fa-shipping-fast"></i> Free Delivery</button>
                <button type="button" class="btn btn-primary"><i class="fas fa-dollar-sign"></i> Easy Payment</button>
                <button type="button" class="btn btn-primary"><i class="fas fa-headset"></i> 24/7 Service</button>
            </div>
        </div>
    </div>
</section>
<section id="menu-items">
    <div class="container">
        <div class="row" id="menuItemsDiv">
            <div class="text-center mb-3">
                <h5 class="section-sub-heading">Delicious Items</h5>
                <h3 class="section-heading">OUR MENU</h3>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card">
                    <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Tasty Food</h5>
                        <p>Lorem Ipsum Dolor Sit, Amet Consectetur Adipisicing Elit. Excepturi, Accusantium.</p>
                        <a href="#" class="btn btn-primary card-btn">Add To Cart </a> <span class="text-price">$150</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card">
                    <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Tasty Food</h5>
                        <p>Lorem Ipsum Dolor Sit, Amet Consectetur Adipisicing Elit. Excepturi, Accusantium.</p>
                        <a href="#" class="btn btn-primary card-btn">Add To Cart </a> <span class="text-price">$150</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card">
                    <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Tasty Food</h5>
                        <p>Lorem Ipsum Dolor Sit, Amet Consectetur Adipisicing Elit. Excepturi, Accusantium.</p>
                        <a href="#" class="btn btn-primary card-btn">Add To Cart </a> <span class="text-price">$150</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card">
                    <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Tasty Food</h5>
                        <p>Lorem Ipsum Dolor Sit, Amet Consectetur Adipisicing Elit. Excepturi, Accusantium.</p>
                        <a href="#" class="btn btn-primary card-btn">Add To Cart </a> <span class="text-price">$150</span>
                    </div>
                </div>
            </div>
            <div id="cardTemplateColumn" class="visually-hidden">
                <div class="col-md-3 mb-3">
                    <div class="card">
                        <img src="./images/spinner-icon-gif-17.jpg" class="card-img-top p-3" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Tasty Food</h5>
                            <p>Lorem Ipsum Dolor Sit, Amet Consectetur Adipisicing Elit. Excepturi, Accusantium.</p>
                            <a href="#" class="btn btn-primary card-btn">Add To Cart </a> <span class="text-price">$150</span>
                        </div>
                    </div>
                </div>

            </div>
            <div class="text-center mb-3">
                <a href="#">see more</a>
            </div>
        </div>
    </div>
</section>

<section id="contact-form">
    <div class="container">
        <div class="text-center mb-3">
            <h5 class="section-sub-heading">Order Now</h5>
            <h3 class="section-heading">FREE AND FAST</h3>
        </div>
        <form>
            <div class="row form-row">
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label class="form-label">Your Name</label>
                        <input type="text" class="form-control" placeholder="Enter Name" />
                    </div>
                    <div class="form-group mb-3">
                        <label class="form-label">Your Order</label>
                        <input type="text" class="form-control" placeholder="Enter food name" />
                    </div>
                    <div class="form-group mb-3">
                        <label class="form-label">How Much</label>
                        <input type="number" class="form-control" placeholder="How many orders" />
                    </div>
                    <div class="form-group mb-3">
                        <label class="form-label">Your Address</label>
                        <textarea class="form-control" cols="30" rows="10" placeholder="Enter your address"></textarea>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label class="form-label">Your Number</label>
                        <input type="text" class="form-control" placeholder="Enter contact number" />
                    </div>
                    <div class="form-group mb-3">
                        <label class="form-label">Additional Food</label>
                        <input type="text" class="form-control" placeholder="Extra with food" />
                    </div>
                    <div class="form-group mb-3">
                        <label class="form-label">Date and Time</label>
                        <input type="date" class="form-control" placeholder="" />
                    </div>
                    <div class="form-group mb-3">
                        <label class="form-label">Your Message</label>
                        <textarea class="form-control" cols="30" rows="10" placeholder="Enter your message"></textarea>
                    </div>
                </div>
                <div class="col-md-12">
                    <button type="button" class="btn btn-primary btn-orderNow">Order Now</button>
                </div>
            </div>
        </form>
    </div>
</section>



<div id="menuList">
</div>
<script>
    $(document).ready(() => {
       LoadPopularItems();
    });

   async function LoadPopularItems()
    {
        $.ajax({
            type: 'GET',
            url: '@Url.Action("GetMenuItems", "Home")',
            async: true,
            success: function (result) {
                for (var i = 0; i < result.length; i++) {

                    //debugger;
                    var $cardHtml = $('#cardTemplateColumn').clone();

                    var itemName = result[i].name;
                    var price = result[i].salePrice;

                    $cardHtml.find('.card-title').text(result[i].name);
                    $cardHtml.find('.card-text').text("$" + result[i].salePrice);
                    $cardHtml.find('.card-btn').attr('data-itemId', result[i].itemMasterId);
                    
                    $('#popularItemsDiv').append($cardHtml.html());
                }
                //const itemNames = result.map(x => x.name);
                //console.log(itemNames);

                //add menu items with loader image
                //pass data to loadImage function
                LoadActualImage(result);
                ////debugger;

             //   var actualIamge = `<img src="data:image/jpg;base64," + ${img.toString()} height="50" width="50" />`;

               

                //Bind with cards one by one
            },
            error: function (err) { alert(err); }
        });
    }
    function LoadActualImage(result) {

        for (var i = 0; i < result.length; i++) {
             // var result = "";

            //debugger;
            console.log(result[i]);
             $.ajax({
                 type: 'GET',
                 url: '@Url.Action("GetImageByItemId", "Home")',
                 data: { imageId: result[i].imageMasterId },
                 async: false,
                 success: function (response) {
                     //debugger;
                   //  console.log(response);
                     console.log(result[i].itemMasterId);

                     $('#popularItemsDiv').find(`a[data-itemId=${result[i].itemMasterId}]`)
                         .closest('.card').find('img')
                         .attr('src', "data:image/jpg;base64," + response.filePathStr);
                    // $('#menuList').find('img').attr('src', "data:image/jpg;base64," + response.filePath);
             
                 },
                 error: function (error) { alert(error); }
             });
        }
      
        
    }
</script>

